# 개요

이 문서는 Opinion Manipulation Game의 사용자 흐름을 정의합니다. 사용자는 타이틀 화면에서 시작해 스토리 씬, 댓글 알바 미션, 결과 확인을 거쳐 다양한 엔딩에 도달합니다. 각 단계는 React 컴포넌트와 Supabase의 기능을 활용해 구현되며, 직관적이고 매끄러운 경험을 제공합니다.

# 앱 흐름 구조

1. 타이틀 화면
    
2. 스토리 씬 (에피소드 인트로)
    
3. 댓글 알바 씬
    
4. 스토리 씬 (에피소드 엔딩)
    
5. 결과 씬
    
6. 엔딩 (일반/배드/히든)
    

---

# 1. 타이틀 화면

- 설명: 사용자가 게임을 시작하거나 기존 진행 상황을 로드하는 진입 지점.
    
- 화면 구성:
    
    - "새 게임" 버튼
        
    - "게임 로드" 버튼 (4개 저장 슬롯 표시)
        
    - "언어 설정" 버튼
        
- 사용자 액션:
    
    - "새 게임" 클릭 → 스토리 씬 (에피소드 1 인트로)으로 이동
        
    - "게임 로드" 클릭 → 저장된 슬롯 선택 후 해당 스토리/댓글 알바 씬으로 이동
        
    - "언어 설정" 클릭 → 언어 선택 팝업 표시 후 적용
        
- 기술적 구현:
    
    - React 컴포넌트: TitleScreen, SaveSlotList
        
    - Supabase: supabase.auth로 사용자 세션 확인, supabase.from('saves')로 저장 데이터 조회
        

---

# 2. 스토리 씬 (에피소드 인트로)

- 설명: 에피소드의 내러티브를 소개하며 미션의 배경을 제공.
    
- 화면 구성:
    
    - 캐릭터 스탠딩 (검은 실루엣 이미지)
        
    - 배경 이미지
        
    - 대화 상자 (텍스트)
        
    - 전화 디티알톡 채팅 UI
        
    - 상단 알림 메시지
        
    - 시스템 버튼 (저장, 로드, 언어 변경, 타이틀 이동, 종료)
        
- 사용자 액션:
    
    - 화면 클릭/탭 → 대화 진행
        
    - 시스템 버튼 클릭 → 팝업 메뉴 표시 (저장/로드: 4개 슬롯, 언어 변경 등)
        
    - 마지막 대화 도달 → 댓글 알바 씬으로 자동 전환
        
- 기술적 구현:
    
    - React 컴포넌트: StoryScene, DialogueBox, SystemMenu
        
    - Supabase: supabase.storage로 이미지 로드, supabase.from('episodes')로 대화 데이터 조회
        

---

# 3. 댓글 알바 씬

- 설명: 사용자가 댓글을 작성해 여론을 조작하는 핵심 게임 플레이.
    
- 화면 구성:
    
    - 전화 웹 브라우저 UI
        
    - 미션 창 (좌측 상단):
        
        - 목표 (예: "부정적 여론 70% 달성")
            
        - 키워드 (예: "발암물질")
            
        - 조건 (예: "탑스타 피해 없음")
            
    - 여론 상태 창 (우측 상단):
        
        - 긍정/부정/중립 비율
            
        - 남은 기회 (예: "2/5")
            
    - 댓글 섹션:
        
        - 베스트 댓글 3개 (좋아요 순 정렬)
            
        - 일반 댓글 5개
            
    - 댓글 입력 창: 텍스트 입력 + "엔터" 버튼
        
    - 주인공 독백 대화 상자
        
- 사용자 액션:
    
    - 미션 제목 확인 (3초 후 자동 사라짐 또는 클릭)
        
    - 댓글 입력 후 "엔터" → 여론 상태 업데이트 + 독백 표시
        
        - 성공 시: "잘했어…" 등 긍정적 피드백
            
        - 실패 시: "키워드를 빼먹었네…" 등 조언
            
    - 화면 클릭 → 다음 독백 또는 결과 판정
        
    - 최대 기회 초과 → 결과 씬 또는 배드 엔딩 2로 이동
        
- 기술적 구현:
    
    - React 컴포넌트: CommentScene, MissionPanel, OpinionStats, CommentInput
        
    - Supabase: supabase.rpc('update_opinion')로 여론 계산, supabase.from('comments')로 댓글 저장
        

---

# 4. 스토리 씬 (에피소드 엔딩)

- 설명: 미션 결과에 따른 에피소드 결말을 보여줌.
    
- 화면 구성: 인트로와 동일 (캐릭터, 배경, 대화 등)
    
- 사용자 액션:
    
    - 클릭/탭으로 대화 진행
        
    - 마지막 대화 → 결과 씬으로 이동
        
- 기술적 구현:
    
    - React 컴포넌트: 재사용된 StoryScene
        
    - Supabase: supabase.from('episode_endings')로 결과별 대화 데이터 로드
        

---

# 5. 결과 씬

- 설명: 미션 성공/실패 여부를 확인하고 다음 단계로 연결.
    
- 화면 구성:
    
    - 검은 배경 (또는 디자인된 이미지)
        
    - 메시지: "축하합니다! 당신은 여론 조작에 성공했습니다" (성공 시)
        
    - 클라이언트 NPC 피드백 (2문장, 예: "훌륭해. 키워드 활용이 완벽했어.")
        
- 사용자 액션:
    
    - 클릭 → 다음 에피소드 스토리 씬 (인트로)로 이동
        
    - 실패 시 → 배드 엔딩 2로 이동
        
- 기술적 구현:
    
    - React 컴포넌트: ResultScene
        
    - Supabase: supabase.functions.invoke('generate_feedback')로 LLM 피드백 호출 (Gemini 또는 대체 모델)
        

---

# 6. 엔딩 (일반/배드/히든)

- 설명: 사용자의 전체 성과에 따라 결말 제공.
    
- 화면 구성:
    
    - 배드 엔딩 1: "통매음, 명예훼손으로 고발당했습니다" + 게임 오버
        
    - 배드 엔딩 2: "미션 실패로 알바에서 해고당했습니다" + 게임 오버
        
    - 일반 엔딩: 모든 에피소드 클리어 시 기본 결말
        
    - 히든 엔딩: 특정 조건 충족 시 특별 결말
        
- 사용자 액션:
    
    - 클릭 → 타이틀 화면으로 복귀
        
- 기술적 구현:
    
    - React 컴포넌트: EndingScene
        
    - Supabase: supabase.from('progress')로 조건 확인, 엔딩 데이터 로드
        

---

# 전체 흐름 다이어그램 (텍스트 기반)

```text
[타이틀 화면]
   ├── "새 게임" → [스토리 씬: 인트로]
   └── "게임 로드" → [저장 슬롯 선택] → [해당 씬]
[스토리 씬: 인트로]
   └── 진행 완료 → [댓글 알바 씬]
[댓글 알바 씬]
   ├── 성공 → [스토리 씬: 엔딩] → [결과 씬]
   ├── 공격적 댓글 → [배드 엔딩 1]
   └── 기회 초과 → [배드 엔딩 2]
[결과 씬]
   ├── 다음 에피소드 → [스토리 씬: 인트로]
   └── 모든 에피소드 완료 → [일반/히든 엔딩]
```

 